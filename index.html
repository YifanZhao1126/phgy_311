<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spike-Timing Dependent Plasticity Simulation</title>
    <script type="module" src="./main.js"></script>
</head>
<body>
    <div class="header">
        <h1>STDP Simulations</h1>
        <p class="subtitle">Reproduction of Song et al. Figures</p>
        <p class="version">Ver. 2.0.0</p>
        <div class="tab-container">
            <button class="tab-button active" data-tab="figure1">Figure 1 (Neuron 2001)</button>
            <button class="tab-button" data-tab="figure4">Figure 4 (NatNeuro 2000)</button>
        </div>
    </div>
    
    <div id="figure1" class="tab-content active">
    <div class="main-container">
        <div class="left-panel">
            <div class="section">
                <h2>STDP Parameters</h2>
                <div class="param-row">
                    <label><em>τ</em><sub>LTP</sub> (ms):</label>
                    <input type="number" id="tau_ltp" value="20" min="1" max="100">
                </div>
                <div class="param-row">
                    <label><em>A</em><sub>LTP</sub>:</label>
                    <input type="number" id="A_ltp" value="0.005" min="0.001" max="0.1" step="0.001">
                </div>
                <div class="param-row">
                    <label><em>B</em> (LTD/LTP ratio):</label>
                    <input type="number" id="B" value="1.05" min="0.1" max="3" step="0.01">
                </div>
                <div class="param-row">
                    <label><em>g</em><sub>max</sub>:</label>
                    <input type="number" id="gmax" value="0.75" min="0.1" max="2" step="0.01">
                </div>
            </div>
            
            <div class="section">
                <h2>Network Parameters</h2>
                <div class="param-row">
                    <label>Number of neurons (<em>N</em>):</label>
                    <input type="number" id="N" value="100" min="50" max="200" step="50">
                </div>
                <div class="param-row">
                    <label>Simulation time:</label>
                    <input type="number" id="stime" value="500000" min="100000" max="2000000" step="100000">
                </div>
                <div class="param-row">
                    <label>Correlation time (ms):</label>
                    <input type="number" id="corr_time" value="20" min="5" max="100">
                </div>
                <div class="param-row">
                    <label>Correlation strength (<em>yConst</em>):</label>
                    <input type="number" id="yConst" value="2" min="1" max="20">
                </div>
            </div>
            
            <div class="section">
                <h2>Neuron Parameters</h2>
                <div class="param-row">
                    <label><em>V</em><sub>rest</sub> (mV):</label>
                    <input type="number" id="Vrest" value="-74" min="-100" max="-50">
                </div>
                <div class="param-row">
                    <label><em>V</em><sub>th</sub> (mV):</label>
                    <input type="number" id="Vth" value="-54" min="-70" max="-40">
                </div>
                <div class="param-row">
                    <label><em>τ</em><sub>m</sub> (ms):</label>
                    <input type="number" id="tau_m" value="20" min="1" max="50">
                </div>
                <div class="param-row">
                    <label><em>τ</em><sub>ex</sub> (ms):</label>
                    <input type="number" id="tau_ex" value="5" min="1" max="20">
                </div>
                <div class="param-row">
                    <label><em>E</em><sub>ex</sub> (mV):</label>
                    <input type="number" id="Eex" value="0" min="-20" max="20">
                </div>
            </div>
            
            <div class="section">
                <h2>Simulation Control</h2>
                <div class="control-buttons">
                    <button id="runCondition1" class="sim-button">Uncorrelated ↔ Uncorrelated</button>
                    <button id="runCondition2" class="sim-button">Correlated ↔ Uncorrelated</button>
                    <button id="runCondition3" class="sim-button">Correlated ↔ Correlated</button>
                    <button id="stopSimulation" class="sim-button stop-button">Stop Simulation</button>
                </div>
                <div class="status-area">
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="status" id="status">Ready</div>
                </div>
            </div>
        </div>
        
        <div class="right-panel">
            <div class="plot-grid">
                <div class="plot-item" style="grid-column: span 2;">
                    <h4>Current Simulation</h4>
                    <canvas id="currentChart"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Uncorrelated ↔ Uncorrelated</h4>
                    <canvas id="condition1Chart"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Correlated ↔ Uncorrelated</h4>
                    <canvas id="condition2Chart"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Correlated ↔ Correlated</h4>
                    <canvas id="condition3Chart"></canvas>
                </div>
                <div class="plot-item" style="grid-column: span 1;">
                    <canvas id="dummyChart" style="display:none;"></canvas>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div id="figure4" class="tab-content">
    <div class="main-container">
        <div class="left-panel">
            <div class="section">
                <h2>STDP Parameters</h2>
                <div class="param-row">
                    <label><em>τ</em><sub>LTP</sub> (ms):</label>
                    <input type="number" id="f4_tau_ltp" value="20" min="1" max="100">
                </div>
                <div class="param-row">
                    <label><em>A</em><sub>LTP</sub>:</label>
                    <input type="number" id="f4_A_ltp" value="0.005" min="0.001" max="0.1" step="0.001">
                </div>
                <div class="param-row">
                    <label><em>B</em> (LTD/LTP ratio):</label>
                    <input type="number" id="f4_B" value="1.05" min="0.1" max="3" step="0.01">
                </div>
                <div class="param-row">
                    <label><em>g</em><sub>max</sub>:</label>
                    <input type="number" id="f4_gmax" value="0.015" min="0.001" max="0.1" step="0.001">
                </div>
            </div>

            <div class="section">
                <h2>Network Parameters</h2>
                <div class="param-row">
                    <label>Number of neurons (<em>N</em>):</label>
                    <input type="number" id="f4_N" value="1000" min="100" max="2000" step="100">
                </div>
                <div class="param-row">
                    <label>Iterations:</label>
                    <input type="number" id="f4_ttimes" value="2000" min="100" max="5000" step="100">
                </div>
                <div class="param-row">
                    <label>Latency std dev (ms):</label>
                    <input type="number" id="f4_latency_std" value="15" min="1" max="50">
                </div>
            </div>

            <div class="section">
                <h2>Burst Parameters</h2>
                <div class="param-row">
                    <label>Burst duration (ms):</label>
                    <input type="number" id="f4_burstdur" value="20" min="5" max="100">
                </div>
                <div class="param-row">
                    <label>Burst rate (Hz):</label>
                    <input type="number" id="f4_burstrate" value="100" min="10" max="500">
                </div>
            </div>

            <div class="section">
                <h2>Neuron Parameters</h2>
                <div class="param-row">
                    <label><em>V</em><sub>rest</sub> (mV):</label>
                    <input type="number" id="f4_Vrest" value="-74" min="-100" max="-50">
                </div>
                <div class="param-row">
                    <label><em>V</em><sub>th</sub> (mV):</label>
                    <input type="number" id="f4_Vth" value="-54" min="-70" max="-40">
                </div>
                <div class="param-row">
                    <label><em>τ</em><sub>m</sub> (ms):</label>
                    <input type="number" id="f4_tau_m" value="20" min="1" max="50">
                </div>
                <div class="param-row">
                    <label><em>τ</em><sub>ex</sub> (ms):</label>
                    <input type="number" id="f4_tau_ex" value="5" min="1" max="20">
                </div>
                <div class="param-row">
                    <label><em>E</em><sub>ex</sub> (mV):</label>
                    <input type="number" id="f4_Eex" value="0" min="-20" max="20">
                </div>
            </div>

            <div class="section">
                <h2>Simulation Control</h2>
                <div class="control-buttons">
                    <button id="runFigure4" class="sim-button">Run Simulation</button>
                    <button id="stopFigure4" class="sim-button stop-button">Stop</button>
                </div>
                <div class="status-area">
                    <div class="progress-container">
                        <div class="progress-bar" id="f4_progressBar"></div>
                    </div>
                    <div class="status" id="f4_status">Ready</div>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <div class="plot-grid-2x2">
                <div class="plot-item">
                    <h4>Initial Synaptic Weights</h4>
                    <canvas id="f4_initialWeights"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Initial Voltage Trace</h4>
                    <canvas id="f4_initialVoltage"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Synaptic Weights</h4>
                    <canvas id="f4_currentWeights"></canvas>
                </div>
                <div class="plot-item">
                    <h4>Voltage Trace</h4>
                    <canvas id="f4_currentVoltage"></canvas>
                </div>
            </div>
        </div>
    </div>
    </div>

</body>
</html>